<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Stefan Wyder" />
  <meta name="date" content="2015-02-12" />
  <title>URPP Tutorial on R</title>
  <link href="screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Nice R Code" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Bitter:400,700,400italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39493992-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <nav role="navigation">
</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
</head>

<body>
<div id="header">
<h1 class="title">URPP Tutorial on R</h1>
<h2 class="author">Stefan Wyder</h2>
<h3 class="date">February 12, 2015</h3>
</div>
<h1 id="urpp-tutorial-on-r">URPP Tutorial on R</h1>
<h4 id="clean-coding-project-organization">Clean Coding &amp; Project Organization</h4>
<h4 id="running-r-from-command-line">Running R from Command Line</h4>
<div class="figure">
<img src="Logo_URPP_Kreisganz_kl2.png" />
</div>
<p>Stefan Wyder<br />stefan.wyder@uzh.ch</p>
<h1 id="clean-coding">Clean coding</h1>
<p>?</p>
<h1 id="clean-coding-1">Clean coding</h1>
<h2 id="the-main-goal-is-readability">The main goal is <strong>readability</strong></h2>
<pre><code>&quot;You&#39;re always working on a project with at least 1 other collaborator, and that is future you&quot; Hadley Wickham</code></pre>
<p><br /><br />Anyone should be able to pick up the code and understand what is does.</p>
<p><br />Use</p>
<blockquote>
<ul>
<li>descriptive names</li>
<li>consistent style (indentation, names)</li>
<li>functions (single operation, single function)</li>
<li>tell us what the function is doing, not how</li>
</ul>
</blockquote>
<h1 id="be-consistent">Be consistent</h1>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left"></th>
<th align="left"><em>Style 1</em></th>
<th align="left"><em>Style 2</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Variables</strong></td>
<td align="left"></td>
<td align="left">avgExpr</td>
<td align="left">avg_Expr</td>
</tr>
<tr class="even">
<td align="left"><strong>Functions</strong></td>
<td align="left"></td>
<td align="left">CalculateAvgExpr()</td>
<td align="left">Calculate_Avg_Expr()</td>
</tr>
<tr class="odd">
<td align="left"><strong>Constants</strong></td>
<td align="left"></td>
<td align="left">kConstantName</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p><br /> <br />see e.g. <a href="http://google-styleguide.googlecode.com/svn/trunk/Rguide.xml">Google Stylesheet</a></p>
<h1 id="use-functions">Use functions</h1>
<p>Break down the problem into functions<br /><br />One operation, one function</p>
<h1 id="comments">Comments</h1>
<pre><code>&quot;Write code that is so clear that you don&#39;t need to comment it, and then comment it anyway.&quot; Tracy Teal</code></pre>
<ul>
<li>Write things that will make your life easier when you come back to a project:</li>
</ul>
<table>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left">describe your intent</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">reasons for approaches</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">sources of data / code / algorithm</td>
</tr>
</tbody>
</table>
<ul>
<li>Avoid writing comments that just repeat what the code says</li>
</ul>
<h1 id="some-best-practises">Some best practises</h1>
<p>Different styles are possible. These are just some suggestions (learned the hard way)</p>
<h1 id="keep-all-your-source-files-for-a-project-in-the-same-directory.">Keep all your source files for a project in the same directory.</h1>
<h2 id="then-use-relative-paths.">Then use relative paths.</h2>
<pre><code>df &lt;- read.table(&quot;files/data.csv&quot;, header = TRUE)</code></pre>
<p>rather than</p>
<pre><code>df &lt;- read.table(&quot;/home/wyder/PROJECTS/coexpression/files/data.csv&quot;, header = TRUE)</code></pre>
<h1 id="for-larger-projects-separate-your-scripts">For larger projects separate your scripts:</h1>
<table>
<tbody>
<tr class="odd">
<td align="left">load.R</td>
<td align="left"></td>
<td align="left">load raw data</td>
</tr>
<tr class="even">
<td align="left">clean.R</td>
<td align="left"></td>
<td align="left">reformat and transform data, clean outliers, handles missing values</td>
</tr>
<tr class="odd">
<td align="left">functions.R</td>
<td align="left"></td>
<td align="left">keep all functions in a separate file</td>
</tr>
<tr class="even">
<td align="left">do.R</td>
<td align="left"></td>
<td align="left">your actual analysis: loads, cleans data and does analysis</td>
</tr>
</tbody>
</table>
<h1 id="more-tips">More tips</h1>
<blockquote>
<ul>
<li>Run R inside of a project folder<br /></li>
<li>Avoid setwd() in a script. Never use setwd() once the script is running. If you use it put it at the very beginning.</li>
<li>Don't save a session on exit. Prevent unexpected results and start with a clean enviroment</li>
<li>Write down project goals (README file)</li>
<li>Use a versioning system</li>
</ul>
</blockquote>
<h1 id="command-line-usage">Command-Line Usage</h1>
<ul>
<li>Rscript</li>
<li>no saved environment</li>
<li>arguments</li>
<li>data on std input</li>
</ul>
<h1 id="bioconductor">Bioconductor</h1>
<p>www.bioconductor.org</p>
<p>Tools for the statistical analysis and comprehension of genomic data in the R programming language. Also data integration.</p>
<ul>
<li>Sequence Analysis</li>
<li>RNA-seq</li>
<li>Oligonucleotide Arrays</li>
<li>Variants</li>
<li>Annotation (Gene, Pathway, GO, …)</li>
<li>Mass spectrometry and proteomics</li>
<li>…</li>
</ul>
<h1 id="sources">Sources</h1>
<p><a href="https://github.com/swcarpentry/bc">Software Carpentry</a></p>
</body>
</html>
